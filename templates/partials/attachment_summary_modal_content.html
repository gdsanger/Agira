<!-- Attachment AI Summary Modal Content -->
{% load agira_filters %}
{% if not available %}
    <!-- Weaviate is not configured/available -->
    <div class="alert alert-warning">
        <i class="bi bi-exclamation-triangle me-2"></i>
        <strong>Weaviate Not Available</strong>
        <p class="mb-0 mt-2">{{ error }}</p>
    </div>
{% elif not exists %}
    <!-- Object not in Weaviate -->
    <div class="alert alert-info">
        <i class="bi bi-info-circle me-2"></i>
        <strong>Not Indexed</strong>
        <p class="mb-0 mt-2">{{ error }}</p>
        <p class="mb-0 mt-2"><small>The attachment needs to be indexed in Weaviate before a summary can be generated.</small></p>
    </div>
{% elif error %}
    <!-- Error occurred -->
    <div class="alert alert-danger">
        <i class="bi bi-exclamation-circle me-2"></i>
        <strong>Error</strong>
        <p class="mb-0 mt-2">{{ error }}</p>
    </div>
{% elif success %}
    <!-- Success - show summary -->
    <div class="mb-3">
        <h6 class="text-muted mb-2">
            <i class="bi bi-file-earmark-text me-2"></i>
            {{ attachment.original_name }}
        </h6>
    </div>
    
    <div class="card bg-dark">
        <div class="card-body">
            <h6 class="card-title mb-3">
                <i class="bi bi-stars me-2"></i>
                AI-Zusammenfassung
            </h6>
            <div class="summary-content markdown-viewer">{{ summary|render_markdown }}</div>
        </div>
    </div>
    
    <div class="text-muted mt-3">
        <small>
            <i class="bi bi-info-circle me-1"></i>
            Diese Zusammenfassung wurde automatisch durch KI generiert und basiert auf dem indizierten Textinhalt der Datei.
        </small>
    </div>
{% else %}
    <!-- Loading state -->
    <div class="text-center py-5">
        <div class="spinner-border text-primary" role="status">
            <span class="visually-hidden">Loading...</span>
        </div>
        <p class="mt-3 text-muted">Zusammenfassung wird generiert...</p>
    </div>
{% endif %}
